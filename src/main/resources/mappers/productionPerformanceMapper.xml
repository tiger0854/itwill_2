<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="com.ddosirak.mapper.ProductionPerformanceMapper">
  
  	<!-- 실적 등록 -->
  	<insert id="insertProdPerf">
  		insert into prod_perf_add
  		(perf_id, item_code, item_name, perf_gobd, err_reason, remark, pfQTY, perf_date, wo_code)
  		values
  		(#{perf_id}, #{item_code}, #{item_name}, #{perf_gobd}, #{err_reason}, #{remark}, #{pfQTY}, #{perf_date}, #{wo_code})
  	</insert>
  	<!-- 실적 등록 -->
  	
  	<!-- 실적 현황 -->
  	<select id="prodPerfList" resultType="com.ddosirak.domain.ProductionPerformanceVO">
  		SELECT a.perf_id, a.item_code, a.item_name, a.perf_gobd, a.err_reason, a.remark, a.pfQTY, a.perf_date, a.wo_code, a.unit
		FROM prod_perf_add a
		LEFT OUTER JOIN prod p ON a.wo_code = p.wo_code
		WHERE a.wo_code = #{wo_code}
  	</select>
  	<!-- 실적 현황 -->
  	
  	<!-- 실적 수정 조회 -->
  	<select id="perfUpdateList" resultType="com.ddosirak.domain.ProductionPerformanceVO">
  		SELECT a.perf_id, a.item_code, a.item_name, a.perf_gobd, a.err_reason, a.remark, a.pfQTY, a.perf_date, a.wo_code, a.unit
		FROM prod_perf_add a
		LEFT OUTER JOIN prod p ON a.wo_code = p.wo_code
		WHERE a.perf_id = #{perf_id}
  	</select>
  	<!-- 실적 수정 조회 -->
  	
  	<!-- 실적 수정 동작 -->
	<update id="perfUpdate">
		UPDATE prod_perf_add
		SET item_code=#{item_code}, item_name=#{item_name}, perf_gobd=#{perf_gobd}, err_reason=#{err_reason}, remark=#{err_reason}
		WHERE perf_id=#{perf_id}
	</update>
  	<!-- 실적 수정 동작 -->
  	
  	<!-- 실적 삭제 동작 -->
  	<delete id="perfDelete">
  		DELETE FROM prod_perf_add WHERE perf_id=#{perf_id}
	</delete>
  	<!-- 실적 삭제 동작 -->
  	
  	
  	<!-- 로그인 -->
  	<select id="login" resultType="com.ddosirak.domain.EmployeeVO">
  		select * from tbl_member 
  		where user_id=#{user_id} and user_pw=#{user_pw}
  	</select>
  	<!-- 로그인 -->
  	
  	<!-- 회원정보 삭제 -->
  	<delete id="delete">
  		delete from tbl_member where user_id=#{user_id} and user_pw=#{user_pw} 
  	</delete>
  	<!-- 회원정보 삭제 -->
  	  
  </mapper>
  